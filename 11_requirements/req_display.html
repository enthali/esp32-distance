<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Startup Test Requirements" href="req_startup_test.html"><link rel="prev" title="LED Controller Requirements" href="req_led_controller.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Display System Requirements - ESP32 Distance Sensor</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/modern.css?v=803738c0" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=2dda3639" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">ESP32 Distance Sensor</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">ESP32 Distance Sensor</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../01_overview/index.html">Project Overview</a><input aria-label="Toggle navigation of Project Overview" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../01_overview/introduction.html">Project Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_overview/hardware.html">Hardware Specifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../01_overview/quick-start.html">Quick Start Guide</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../05_workshop/index.html">Workshop Overview</a><input aria-label="Toggle navigation of Workshop Overview" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../05_workshop/prerequisites.html">Workshop Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_workshop/getting-started.html">Getting Started with the Workshop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_workshop/hardware-setup.html">Hardware Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../05_workshop/exercises.html">Workshop Exercises</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Requirements Documentation</a><input aria-label="Toggle navigation of Requirements Documentation" checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="req_system.html">System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="req_web_server.html">Web Server Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="req_config_manager_json.html">JSON-Based Configuration Manager Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="req_netif_tunnel.html">Network Interface Tunnel Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="req_distance_sensor.html">Distance Sensor Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="req_led_controller.html">LED Controller Requirements</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Display System Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="req_startup_test.html">Startup Test Requirements</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../12_design/index.html">Design Specifications</a><input aria-label="Toggle navigation of Design Specifications" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_high_level_architecture.html">High-Level Architecture Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_config_manager_json.html">JSON-Based Configuration Manager Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_config_webpage.html">Configuration Webpage Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_web_server.html">Web Server Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_distance_sensor.html">Distance Sensor Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_led_controller.html">LED Controller Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_display.html">Display System Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../12_design/spec_startup_test.html">Startup Test Design Specification</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../21_api/index.html">API Reference</a><input aria-label="Toggle navigation of API Reference" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_config_manager.html">Config Manager API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_led_controller.html">LED Controller API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_distance_sensor.html">Distance Sensor API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_display_logic.html">Display Logic API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_startup_tests.html">Startup Tests API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_netif_uart_tunnel.html">Network Tunnel API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_cert_handler.html">Certificate Handler API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_web_server.html">Web Server API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../21_api/api_wifi_manager.html">WiFi Manager API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../31_traceability/index.html">Traceability</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../90_guides/index.html">Development Guide</a><input aria-label="Toggle navigation of Development Guide" class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/devcontainer.html">Development Container Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/pre-commit-hooks.html">Pre-commit Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/qemu-emulator.html">QEMU Emulator Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/web-flasher.html">Web-Based Firmware Flashing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/debugging.html">Debugging Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/qemu-network-internals.html">QEMU Network Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../90_guides/known-issues.html">Known Issues and Limitations</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../legal/impressum.html">Impressum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../legal/datenschutz.html">Datenschutzerklärung</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/11_requirements/req_display.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="display-system-requirements">
<h1>Display System Requirements<a class="headerlink" href="#display-system-requirements" title="Link to this heading">¶</a></h1>
<p>This document specifies requirements for the Display System, enabling visual representation
of distance measurements through LED strip control with clear user experience definitions.</p>
<p><strong>Document Version</strong>: 2.0
<strong>Last Updated</strong>: 2025-11-10</p>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#system-overview-requirements" id="id2">System Overview Requirements</a></p></li>
<li><p><a class="reference internal" href="#user-experience-requirements" id="id3">User Experience Requirements</a></p></li>
<li><p><a class="reference internal" href="#animation-requirements" id="id4">Animation Requirements</a></p></li>
<li><p><a class="reference internal" href="#implementation-requirements" id="id5">Implementation Requirements</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The display system provides visual feedback through WS2812 LED strips, showing current distance
measurement with dual-layer architecture combining position indication and directional animation
to guide optimal parking.</p>
</section>
<section id="system-overview-requirements">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">System Overview Requirements</a><a class="headerlink" href="#system-overview-requirements" title="Link to this heading">¶</a></h2>
<div class="need_container docutils container" id="SNCB-c0d26a5b">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_1">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Hardware Platform</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_1" title="REQ_DSP_1">REQ_DSP_1</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">hardware</span><span class="needs_spacer">, </span><span class="needs_data">integration</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="req_led_controller.html#REQ_LED_1" title="REQ_DSP_1">REQ_LED_1</a>, <span class="needs_dead_link forbidden">REQ_SYS_1</span></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_3" title="REQ_DSP_1">REQ_DSP_3</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_OVERVIEW_1" title="REQ_DSP_1">SPEC_DSP_OVERVIEW_1</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_COMP_DISPLAY_LOGIC" title="REQ_DSP_1">API_COMP_DISPLAY_LOGIC</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_FUNC_DISPLAY_LOGIC_START" title="REQ_DSP_1">API_FUNC_DISPLAY_LOGIC_START</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL utilize WS2812 addressable LED strip hardware through
the LED controller component API as an integrated, reactive component. LED count and brightness
are configurable via configuration management system.</p>
<p><strong>Rationale:</strong> Establishes the hardware foundation for the visual display system, enabling
flexible LED strip configurations for different deployment scenarios. The system operates
reactively, automatically responding to distance measurements rather than external commands.
Display system uses LED controller API for all hardware access, maintaining clear separation
of concerns.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Display system uses LED controller component API for all LED hardware access</p></li>
<li><p>AC-2: LED count and brightness are configurable via configuration management system</p></li>
<li><p>AC-3: System validates LED count is within reasonable range (1-100 LEDs)</p></li>
<li><p>AC-4: LED controller component handles all GPIO pin configuration and timing</p></li>
<li><p>AC-5: Display system depends on LED controller initialization completing successfully</p></li>
<li><p>AC-6: System operates continuously, updating display in real-time as measurements arrive</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-dc9dcbfb">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_2">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Configuration Integration</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_2" title="REQ_DSP_2">REQ_DSP_2</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">configuration</span><span class="needs_spacer">, </span><span class="needs_data">integration</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="req_config_manager_json.html#REQ_CFG_JSON_1" title="REQ_DSP_2">REQ_CFG_JSON_1</a>, <a class="reference internal" href="req_system.html#REQ_SYS_CFG_1" title="REQ_DSP_2">REQ_SYS_CFG_1</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_2">REQ_DSP_4</a>, <a class="reference internal" href="#REQ_DSP_5" title="REQ_DSP_2">REQ_DSP_5</a>, <a class="reference internal" href="#REQ_DSP_6" title="REQ_DSP_2">REQ_DSP_6</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ARCH_2" title="REQ_DSP_2">SPEC_DSP_ARCH_2</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_COMP_DISPLAY_LOGIC" title="REQ_DSP_2">API_COMP_DISPLAY_LOGIC</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_FUNC_DISPLAY_LOGIC_START" title="REQ_DSP_2">API_FUNC_DISPLAY_LOGIC_START</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL obtain all operational parameters from the
configuration management system.</p>
<p><strong>Rationale:</strong> Ensures centralized configuration management and eliminates hardcoded values,
enabling runtime reconfiguration and consistent system behavior. Parameter validation is
handled by the configuration manager. Configuration changes trigger system reset, allowing
static memory allocation at startup with no runtime reallocation - preventing memory
fragmentation and performance degradation in the embedded environment.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: All display parameters are obtained from configuration manager</p></li>
<li><p>AC-2: System reads configuration at initialization</p></li>
</ul>
<p><strong>Configuration Parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">led_count</span></code>: Number of LEDs in the strip</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">led_brightness</span></code>: LED brightness level</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_distance_cm</span></code>: Minimum distance threshold</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_distance_cm</span></code>: Maximum distance threshold</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="user-experience-requirements">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">User Experience Requirements</a><a class="headerlink" href="#user-experience-requirements" title="Link to this heading">¶</a></h2>
<div class="need_container docutils container" id="SNCB-bed02e56">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_3">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Core Visualization Concept</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_3" title="REQ_DSP_3">REQ_DSP_3</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">ux</span><span class="needs_spacer">, </span><span class="needs_data">visualization</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="req_distance_sensor.html#REQ_SNS_11" title="REQ_DSP_3">REQ_SNS_11</a>, <a class="reference internal" href="#REQ_DSP_1" title="REQ_DSP_3">REQ_DSP_1</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_3">REQ_DSP_4</a>, <a class="reference internal" href="#REQ_DSP_5" title="REQ_DSP_3">REQ_DSP_5</a>, <a class="reference internal" href="#REQ_DSP_12" title="REQ_DSP_3">REQ_DSP_12</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ALGO_1" title="REQ_DSP_3">SPEC_DSP_ALGO_1</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_COMP_DISPLAY_LOGIC" title="REQ_DSP_3">API_COMP_DISPLAY_LOGIC</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_FUNC_DISPLAY_LOGIC_START" title="REQ_DSP_3">API_FUNC_DISPLAY_LOGIC_START</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL illuminate a single LED that represents the current
measured distance with real-time updates. The display system consumes processed distance
measurements from the distance sensor component without additional filtering or smoothing.</p>
<p><strong>Rationale:</strong> Provides clear, unambiguous visual feedback where users can immediately
understand the current distance measurement through LED position. The distance sensor component
owns all measurement processing, filtering, and smoothing (REQ_SNS_11); the display system is
responsible solely for visual representation of processed measurements, maintaining clear
separation of concerns.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Only one LED is illuminated at any given time (excluding animation layers)</p></li>
<li><p>AC-2: LED position corresponds to processed distance measurement value from sensor component</p></li>
<li><p>AC-3: Display updates immediately when new processed measurements arrive from sensor queue</p></li>
<li><p>AC-4: Display system SHALL NOT apply additional smoothing or filtering to distance measurements</p></li>
<li><p>AC-5: Display system uses distance measurements directly from sensor component’s processed measurement queue</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-84a6d5af">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_4">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Dual-Layer Display with Position and Animation</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_4">REQ_DSP_4</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">ux</span><span class="needs_spacer">, </span><span class="needs_data">animation</span><span class="needs_spacer">, </span><span class="needs_data">zones</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_3" title="REQ_DSP_4">REQ_DSP_3</a>, <a class="reference internal" href="#REQ_DSP_2" title="REQ_DSP_4">REQ_DSP_2</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_6" title="REQ_DSP_4">REQ_DSP_6</a>, <a class="reference internal" href="#REQ_DSP_7" title="REQ_DSP_4">REQ_DSP_7</a>, <a class="reference internal" href="#REQ_DSP_8" title="REQ_DSP_4">REQ_DSP_8</a>, <a class="reference internal" href="#REQ_DSP_9" title="REQ_DSP_4">REQ_DSP_9</a>, <a class="reference internal" href="#REQ_DSP_10" title="REQ_DSP_4">REQ_DSP_10</a>, <a class="reference internal" href="#REQ_DSP_14" title="REQ_DSP_4">REQ_DSP_14</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ALGO_1" title="REQ_DSP_4">SPEC_DSP_ALGO_1</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_COMP_DISPLAY_LOGIC" title="REQ_DSP_4">API_COMP_DISPLAY_LOGIC</a>, <a class="reference internal" href="../21_api/api_display_logic.html#API_FUNC_DISPLAY_LOGIC_START" title="REQ_DSP_4">API_FUNC_DISPLAY_LOGIC_START</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL use a dual-layer architecture combining position
indication and directional animation to guide optimal parking. When distance is outside the
ideal zone, the system SHALL display a green LED at the measured position (position layer)
and a directional animation (animation layer) at reduced brightness guiding toward the ideal zone.</p>
<p><strong>Rationale:</strong> Dual-layer display provides both current position feedback and directional
guidance. The ideal zone is calculated as a centered range (IDEAL_CENTER_PERCENT ±
IDEAL_SIZE_PERCENT/2) to provide a clear target area. Green position indicator shows current
location, while low-brightness directional animation (2%) guides without overwhelming the
position signal.</p>
<p><strong>Zone Calculation</strong> (configuration-independent):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ideal_size</span> <span class="pre">=</span> <span class="pre">(led_count</span> <span class="pre">*</span> <span class="pre">10)</span> <span class="pre">/</span> <span class="pre">100</span></code> (10% of strip)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ideal_center</span> <span class="pre">=</span> <span class="pre">(led_count</span> <span class="pre">*</span> <span class="pre">30)</span> <span class="pre">/</span> <span class="pre">100</span></code> (30% position)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ideal_start</span> <span class="pre">=</span> <span class="pre">ideal_center</span> <span class="pre">-</span> <span class="pre">(ideal_size</span> <span class="pre">/</span> <span class="pre">2)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ideal_end</span> <span class="pre">=</span> <span class="pre">ideal_start</span> <span class="pre">+</span> <span class="pre">ideal_size</span> <span class="pre">-</span> <span class="pre">1</span></code></p></li>
</ul>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Minimum configured distance maps exactly to first LED (position 0)</p></li>
<li><p>AC-2: Maximum configured distance maps exactly to last LED (position led_count-1)</p></li>
<li><p>AC-3: LED position calculated using linear interpolation between positions 0 and led_count-1</p></li>
<li><p>AC-4: Zone 1 “too close” (position &lt; ideal_start): Orange LED at position (50% brightness) + red animation (100% brightness)</p></li>
<li><p>AC-5: Zone 2 “ideal” (ideal_start ≤ position ≤ ideal_end): All ideal zone LEDs red</p></li>
<li><p>AC-6: Zone 3 “too far” (position &gt; ideal_end): Green LED at position + white animation</p></li>
<li><p>AC-7: Zone boundaries calculated using integer arithmetic for embedded efficiency</p></li>
<li><p>AC-8: Ideal zone size = 10% of LED count, centered at 30% position</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-ed95c9b6">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_5">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Emergency Proximity Warning</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_5" title="REQ_DSP_5">REQ_DSP_5</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">ux</span><span class="needs_spacer">, </span><span class="needs_data">safety</span><span class="needs_spacer">, </span><span class="needs_data">emergency</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_2" title="REQ_DSP_5">REQ_DSP_2</a>, <a class="reference internal" href="#REQ_DSP_3" title="REQ_DSP_5">REQ_DSP_3</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_11" title="REQ_DSP_5">REQ_DSP_11</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_3" title="REQ_DSP_5">SPEC_DSP_ANIM_3</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL show a blinking red pattern on every 10th LED when
the measured distance is below the configured minimum distance threshold, indicating dangerous
proximity.</p>
<p><strong>Rationale:</strong> Blinking pattern on multiple LEDs (every 10th: positions 0, 10, 20, 30, etc.)
provides urgent visual warning that is more attention-grabbing than a single static LED. The
1 Hz blink rate (500ms ON, 500ms OFF) is standard for emergency warnings.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: LEDs at positions 0, 10, 20, 30, … (every 10th) blink red when distance &lt; min_distance_cm</p></li>
<li><p>AC-2: Blink frequency is 1 Hz (500ms ON, 500ms OFF)</p></li>
<li><p>AC-3: Emergency pattern has highest rendering priority (overrides position and animation layers)</p></li>
<li><p>AC-4: Pattern persists until measurement returns to valid range</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-11cf4fe3">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_6">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Out of Range Display</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_6" title="REQ_DSP_6">REQ_DSP_6</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">ux</span><span class="needs_spacer">, </span><span class="needs_data">error-handling</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_2" title="REQ_DSP_6">REQ_DSP_2</a>, <a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_6">REQ_DSP_4</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_7" title="REQ_DSP_6">REQ_DSP_7</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL show only the directional animation layer (no
position indicator) when the measured distance is above the configured maximum distance
threshold, indicating the measurement is invalid but direction is known.</p>
<p><strong>Rationale:</strong> When distance exceeds sensor maximum range, the exact position is unreliable,
but the direction (too far) is known. Showing only the blue “too far” animation provides
directional guidance without falsely indicating a valid position measurement.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Blue “too far” animation runs when distance &gt; max_distance_cm</p></li>
<li><p>AC-2: No green position indicator is shown (measurement invalid)</p></li>
<li><p>AC-3: Animation provides directional cue to move closer</p></li>
<li><p>AC-4: Display persists until measurement returns to valid range</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="animation-requirements">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Animation Requirements</a><a class="headerlink" href="#animation-requirements" title="Link to this heading">¶</a></h2>
<div class="need_container docutils container" id="SNCB-b011f17b">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_7">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Too Far Directional Animation</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_7" title="REQ_DSP_7">REQ_DSP_7</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">animation</span><span class="needs_spacer">, </span><span class="needs_data">guidance</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_7">REQ_DSP_4</a>, <a class="reference internal" href="#REQ_DSP_6" title="REQ_DSP_7">REQ_DSP_6</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_10" title="REQ_DSP_7">REQ_DSP_10</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_1" title="REQ_DSP_7">SPEC_DSP_ANIM_1</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL show a running white LED animation from the far end
toward the ideal zone when the vehicle is in the “too far” zone, guiding the user to move closer.</p>
<p><strong>Rationale:</strong> White color at low brightness (2% = ~5/255) provides directional guidance without
overwhelming the green position indicator. Animation runs from LED 39 (or led_count-1) toward
ideal_end at 100ms per LED step, creating smooth directional motion that intuitively guides the
user closer.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Animation runs when position &gt; ideal_end (too far zone)</p></li>
<li><p>AC-2: White LED color at 2% brightness (~5/255 RGB values)</p></li>
<li><p>AC-3: Animation starts at LED position led_count-1 (far end)</p></li>
<li><p>AC-4: Animation moves toward ideal_end at 100ms per LED step</p></li>
<li><p>AC-5: Animation loops continuously while in too far zone</p></li>
<li><p>AC-6: Animation stops immediately when entering ideal zone or too close zone</p></li>
<li><p>AC-7: Animation layer renders below position layer (green position LED visible on top)</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-10257d1e">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_8">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Too Close Directional Animation</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_8" title="REQ_DSP_8">REQ_DSP_8</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">animation</span><span class="needs_spacer">, </span><span class="needs_data">warning</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_8">REQ_DSP_4</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_10" title="REQ_DSP_8">REQ_DSP_10</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_1" title="REQ_DSP_8">SPEC_DSP_ANIM_1</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL show a running red LED animation from the near end
toward the ideal zone when the vehicle is in the “too close” zone, guiding the user to move away.</p>
<p><strong>Rationale:</strong> Red color at full brightness (100% = 255/255) provides strong directional
guidance and warning. Animation runs from LED 0 toward ideal_start at 100ms per LED step,
creating smooth directional motion that intuitively guides the user away. Position indicator
rendered at 50% brightness to remain visible but subordinate to the warning animation.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Animation runs when position &lt; ideal_start (too close zone)</p></li>
<li><p>AC-2: Red LED color at 100% brightness (255/255 RGB values)</p></li>
<li><p>AC-3: Animation starts at LED position 0 (near end)</p></li>
<li><p>AC-4: Animation moves toward ideal_start at 100ms per LED step</p></li>
<li><p>AC-5: Animation loops continuously while in too close zone</p></li>
<li><p>AC-6: Animation stops immediately when entering ideal zone or too far zone</p></li>
<li><p>AC-7: Position indicator rendered at 50% brightness to maintain visibility</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-19b0ac29">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_9">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Ideal Zone STOP Indication</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_9" title="REQ_DSP_9">REQ_DSP_9</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">ux</span><span class="needs_spacer">, </span><span class="needs_data">target-zone</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_9">REQ_DSP_4</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_10" title="REQ_DSP_9">REQ_DSP_10</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_2" title="REQ_DSP_9">SPEC_DSP_ANIM_2</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL illuminate all LEDs in the ideal zone with red color
to provide visual target guidance. The ideal zone SHALL be visible at 2% brightness at all
times as a background reference, and SHALL illuminate at 100% brightness when the measured
position is within the ideal zone, providing clear STOP signal using universal traffic signal
color.</p>
<p><strong>Rationale:</strong> Red is universally recognized as STOP signal. The ideal zone is always visible
at low brightness (2%) to show the driver the target parking position regardless of current
location. When vehicle reaches ideal zone, all LEDs in that zone (ideal_start through ideal_end)
turn solid red at 100% brightness, providing unmistakable “park anywhere in this zone” indication.
No position indicator or animation needed - the entire zone is valid. The brightness increase
from 2% to 100% provides clear positive feedback when the target is reached.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: All LEDs from ideal_start to ideal_end illuminate red at 2% brightness at all times (background layer)</p></li>
<li><p>AC-2: When ideal_start ≤ position ≤ ideal_end, ideal zone LEDs illuminate at 100% brightness (255, 0, 0)</p></li>
<li><p>AC-3: Background ideal zone (2%) is visible in Zone 1 (too close) and Zone 3 (too far)</p></li>
<li><p>AC-4: No position indicator shown when in ideal zone (entire zone is valid)</p></li>
<li><p>AC-5: No animation layer shown when in ideal zone (destination reached)</p></li>
<li><p>AC-6: Full brightness ideal zone (100%) has priority over animation and position layers</p></li>
<li><p>AC-7: Background ideal zone (2%) renders below animation and position layers</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-c46f6a5f">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_10">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Dual-Layer Rendering Architecture</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_10" title="REQ_DSP_10">REQ_DSP_10</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">architecture</span><span class="needs_spacer">, </span><span class="needs_data">rendering</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_10">REQ_DSP_4</a>, <a class="reference internal" href="#REQ_DSP_7" title="REQ_DSP_10">REQ_DSP_7</a>, <a class="reference internal" href="#REQ_DSP_8" title="REQ_DSP_10">REQ_DSP_8</a>, <a class="reference internal" href="#REQ_DSP_9" title="REQ_DSP_10">REQ_DSP_9</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="#REQ_DSP_13" title="REQ_DSP_10">REQ_DSP_13</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ALGO_2" title="REQ_DSP_10">SPEC_DSP_ALGO_2</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_1" title="REQ_DSP_10">SPEC_DSP_ANIM_1</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_2" title="REQ_DSP_10">SPEC_DSP_ANIM_2</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_4" title="REQ_DSP_10">SPEC_DSP_ANIM_4</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL implement a multi-layer rendering architecture with
clear layer priority: Emergency &gt; Ideal Zone (full) &gt; Position &gt; Animation &gt; Ideal Zone
(background), ensuring proper visual compositing.</p>
<p><strong>Rationale:</strong> Layered rendering architecture allows independent animation and position updates
with deterministic priority. Emergency warnings must override all other displays, full brightness
ideal zone indication overrides position/animation when reached, position indicator must be
visible over animation layer for current location feedback, and background ideal zone provides
constant visual reference at lowest priority.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Ideal zone background layer renders first (base layer, 2% red brightness, always visible)</p></li>
<li><p>AC-2: Animation layer renders second (2-100% brightness depending on zone)</p></li>
<li><p>AC-3: Position layer renders third (orange or green LED at measured position, 50-100% brightness)</p></li>
<li><p>AC-4: Ideal zone full brightness overrides position and animation (all red at 100%)</p></li>
<li><p>AC-5: Emergency pattern renders last (highest priority, overrides all layers)</p></li>
<li><p>AC-6: Single led_show() call per frame updates all LEDs atomically</p></li>
<li><p>AC-7: Frame rate of 10 FPS (100ms per frame) for animation steps</p></li>
<li><p>AC-8: No blocking delays in rendering pipeline (use FreeRTOS timer for animation timing)</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-2f983e34">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_11">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Emergency Proximity Blinking Pattern</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_11" title="REQ_DSP_11">REQ_DSP_11</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">safety</span><span class="needs_spacer">, </span><span class="needs_data">emergency</span><span class="needs_spacer">, </span><span class="needs_data">animation</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_5" title="REQ_DSP_11">REQ_DSP_5</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ANIM_3" title="REQ_DSP_11">SPEC_DSP_ANIM_3</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL implement a 1 Hz blinking pattern on every 10th LED
position when distance is below minimum threshold, creating urgent visual warning. All other
display layers SHALL be suppressed during emergency mode to ensure maximum focus on the warning.</p>
<p><strong>Rationale:</strong> Blinking pattern implementation requires timing state machine with 500ms ON/OFF
cycles. Every 10th LED (0, 10, 20, 30, …) creates distributed warning pattern visible from
any viewing angle. Highest priority ensures emergency always visible. Suppressing ideal zone
background and other layers during emergency eliminates visual distractions and focuses driver
attention exclusively on the danger warning, enabling faster reaction time.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Blink state toggles every 500ms (1 Hz frequency)</p></li>
<li><p>AC-2: ON state: LEDs at positions 0, 10, 20, 30, … show red (255, 0, 0)</p></li>
<li><p>AC-3: OFF state: LEDs at positions 0, 10, 20, 30, … turn off (0, 0, 0)</p></li>
<li><p>AC-4: Blink timing uses FreeRTOS timer or tick count for accuracy</p></li>
<li><p>AC-5: Pattern overrides all other layers (highest priority)</p></li>
<li><p>AC-6: Only affects multiples of 10 positions (0, 10, 20, 30, …)</p></li>
<li><p>AC-7: Emergency pattern activates immediately when distance &lt; min_distance_cm</p></li>
<li><p>AC-8: Ideal zone background and all other layers are suppressed during emergency mode</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="implementation-requirements">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Implementation Requirements</a><a class="headerlink" href="#implementation-requirements" title="Link to this heading">¶</a></h2>
<div class="need_container docutils container" id="SNCB-c1144993">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_12">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Task-Based Architecture</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_12" title="REQ_DSP_12">REQ_DSP_12</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">architecture</span><span class="needs_spacer">, </span><span class="needs_data">freertos</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_3" title="REQ_DSP_12">REQ_DSP_3</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ARCH_1" title="REQ_DSP_12">SPEC_DSP_ARCH_1</a>, <a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_API_1" title="REQ_DSP_12">SPEC_DSP_API_1</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL implement a FreeRTOS task that blocks waiting for
new distance measurements and updates the display accordingly.</p>
<p><strong>Rationale:</strong> Provides responsive, real-time display updates using efficient blocking I/O
patterns, ensuring minimal resource usage and immediate response to sensor data.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Implementation uses FreeRTOS task for display logic</p></li>
<li><p>AC-2: Task blocks waiting for distance measurement notifications</p></li>
<li><p>AC-3: Task has appropriate priority below measurement task but above any other task for real-time response</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-4f565b60">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_13">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">LED Buffer Management</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_13" title="REQ_DSP_13">REQ_DSP_13</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">memory</span><span class="needs_spacer">, </span><span class="needs_data">ws2812</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_10" title="REQ_DSP_13">REQ_DSP_10</a>, <a class="reference internal" href="req_led_controller.html#REQ_LED_2" title="REQ_DSP_13">REQ_LED_2</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ALGO_2" title="REQ_DSP_13">SPEC_DSP_ALGO_2</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL maintain an internal LED state buffer and update all
LEDs simultaneously using WS2812 serial protocol characteristics.</p>
<p><strong>Rationale:</strong> WS2812 LEDs use serial daisy-chain protocol requiring complete buffer
transmission to update display, ensuring consistent visual state across all LEDs.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Internal buffer maintains complete LED strip state (all LED colors)</p></li>
<li><p>AC-2: Buffer is transmitted to hardware as single operation per WS2812 protocol</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
<div class="need_container docutils container" id="SNCB-9681aefc">
<table class="need needs_grid_simple needs_layout_clean needs_style_none needs_type_req docutils align-default" id="REQ_DSP_14">
<tbody>
<tr class="need head row-odd"><td class="need head"><div class="needs_head line-block">
<div class="line"><span><span class="needs_type_name"><span class="needs_data">Requirement</span></span>: </span><strong><span><span class="needs_title"><span class="needs_data">Distance-to-LED Calculation</span></span></span></strong><span> <span class="needs-id"><a class="reference internal" href="#REQ_DSP_14" title="REQ_DSP_14">REQ_DSP_14</a></span>  <span class="needs needs_collapse" id="target__show__meta"><span class="needs collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-down-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="8 12 12 16 16 12"></polyline><line x1="12" y1="8" x2="12" y2="16"></line></svg></span><span class="needs visible collapse_is_hidden"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right-circle"><circle cx="12" cy="12" r="10"></circle><polyline points="12 16 16 12 12 8"></polyline><line x1="8" y1="12" x2="16" y2="12"></line></svg></span></span> </span></div>
</div>
</td>
</tr>
<tr class="need meta row-even"><td class="need meta"><div class="needs_meta line-block">
<div class="line"><span><span><div class="line"><span class="needs_status"><span class="needs_label">status: </span><span class="needs_data">approved</span></span></div>
<div class="line"><span class="needs_tags"><span class="needs_label">tags: </span><span class="needs_data_container"><span class="needs_data">display</span><span class="needs_spacer">, </span><span class="needs_data">algorithm</span><span class="needs_spacer">, </span><span class="needs_data">mapping</span></span></span></div>
<div class="line"><span class="needs_priority"><span class="needs_label">priority: </span><span class="needs_data">mandatory</span></span></div>
</span></span></div>
<div class="line"><span><div class="line">links outgoing: <span class="links"><span><a class="reference internal" href="#REQ_DSP_4" title="REQ_DSP_14">REQ_DSP_4</a></span></span></div>
<div class="line">links incoming: <span class="links"><span><a class="reference internal" href="../12_design/spec_display.html#SPEC_DSP_ALGO_1" title="REQ_DSP_14">SPEC_DSP_ALGO_1</a></span></span></div>
</span></div>
</div>
</td>
</tr>
<tr class="need content row-odd"><td class="need content" colspan="1"><p><strong>Description:</strong> The display system SHALL implement linear mapping calculation to convert
distance measurements to LED positions as specified in the visual requirements.</p>
<p><strong>Rationale:</strong> Provides the mathematical foundation for translating distance values into
discrete LED positions, implementing the visual behavior defined in REQ_DSP_4.</p>
<p><strong>Acceptance Criteria:</strong></p>
<ul class="simple">
<li><p>AC-1: Calculation handles full configured distance range per visual requirements</p></li>
<li><p>AC-2: Result is clamped to valid LED index range [0, led_count-1]</p></li>
<li><p>AC-3: Edge cases (min/max distances) map exactly to first/last LEDs per visual requirements</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="req_startup_test.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Startup Test Requirements</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="req_led_controller.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">LED Controller Requirements</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, ESP32 Distance Sensor Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Display System Requirements</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#system-overview-requirements">System Overview Requirements</a></li>
<li><a class="reference internal" href="#user-experience-requirements">User Experience Requirements</a></li>
<li><a class="reference internal" href="#animation-requirements">Animation Requirements</a></li>
<li><a class="reference internal" href="#implementation-requirements">Implementation Requirements</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js?v=5d32c60e"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../_static/documentation_options.js?v=51b770b3"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    </body>
</html>