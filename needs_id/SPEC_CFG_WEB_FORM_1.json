{"created": "2025-11-12T13:58:47.359032", "current_version": "", "project": "ESP32 Distance Sensor", "versions": {"": {"created": "2025-11-12T13:58:47.359013", "creator": {"program": "sphinx_needs", "version": "6.1.0"}, "needs": {"SPEC_CFG_WEB_FORM_1": {"acceptance_criteria": "", "api_signature": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "component": "", "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** JavaScript code that dynamically creates HTML form elements based on JSON schema field definitions.\n\n**Schema Field Processing:**\n\n.. code-block:: javascript\n\n   // Input: JSON schema from GET /api/config/schema\n   const schema = {\n     \"fields\": [\n       {\n         \"key\": \"wifi_ssid\",\n         \"type\": \"string\",\n         \"label\": \"WiFi SSID\",\n         \"description\": \"Network name to connect\",\n         \"default\": \"\",\n         \"validation\": {\n           \"required\": true,\n           \"maxLength\": 32\n         }\n       },\n       {\n         \"key\": \"led_count\",\n         \"type\": \"integer\",\n         \"label\": \"LED Count\",\n         \"description\": \"Number of LEDs in strip\",\n         \"default\": 50,\n         \"validation\": {\n           \"min\": 1,\n           \"max\": 300\n         }\n       }\n     ]\n   };\n\n   // Process each field to generate form HTML\n   function generateForm(schema) {\n     const formContainer = document.getElementById('config-form');\n\n     schema.fields.forEach(field => {\n       const formGroup = createFormGroup(field);\n       formContainer.appendChild(formGroup);\n     });\n   }\n\n**Form Element Generation Logic:**\n\n.. code-block:: javascript\n\n   function createFormGroup(field) {\n     const group = document.createElement('div');\n     group.className = 'form-group';\n\n     // Create label\n     const label = document.createElement('label');\n     label.textContent = field.label;\n     label.htmlFor = field.key;\n\n     // Create input based on type\n     let input;\n     switch(field.type) {\n       case 'string':\n         input = document.createElement('input');\n         input.type = field.key.includes('pass') ? 'password' : 'text';\n         if (field.validation?.maxLength) {\n           input.maxLength = field.validation.maxLength;\n         }\n         if (field.validation?.pattern) {\n           input.pattern = field.validation.pattern;\n         }\n         break;\n\n       case 'integer':\n         input = document.createElement('input');\n         input.type = 'number';\n         if (field.validation?.min !== undefined) {\n           input.min = field.validation.min;\n         }\n         if (field.validation?.max !== undefined) {\n           input.max = field.validation.max;\n         }\n         break;\n\n       case 'boolean':\n         input = document.createElement('input');\n         input.type = 'checkbox';\n         break;\n     }\n\n     input.id = field.key;\n     input.name = field.key;\n     input.required = field.validation?.required || false;\n\n     // Create description\n     const description = document.createElement('small');\n     description.className = 'form-text';\n     description.textContent = field.description;\n\n     group.appendChild(label);\n     group.appendChild(input);\n     group.appendChild(description);\n\n     return group;\n   }\n\n**Design Properties:**\n\n- **No hardcoded form fields**: All HTML generated from schema\n- **Type-safe input elements**: Schema type maps to correct HTML input type\n- **Automatic validation**: HTML5 validation attributes from schema\n- **Password detection**: Fields with \"pass\" in key get type=\"password\"\n- **Extensible**: New schema fields automatically generate form elements", "created_at": "", "docname": "12_design/spec_config_webpage", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "header_file": "", "id": "SPEC_CFG_WEB_FORM_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 143, "links": ["SPEC_CFG_WEB_ARCH_1", "SPEC_CFG_JSON_SCHEMA_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "parameters": "", "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "returns": "", "section_name": "Schema-Driven Form Generation", "sections": ["Schema-Driven Form Generation", "Configuration Webpage Design Specification"], "service": "", "signature": null, "specific": "", "status": "open", "style": null, "tags": ["form-generation", "schema", "javascript"], "template": null, "title": "Dynamic Form Generation from Schema", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 1}}}