{"created": "2025-11-12T08:52:39.092515", "current_version": "", "project": "ESP32 Distance Sensor", "versions": {"": {"created": "2025-11-12T08:52:39.092497", "creator": {"program": "sphinx_needs", "version": "6.1.0"}, "needs": {"SPEC_DSP_ALGO_2": {"acceptance_criteria": "", "api_signature": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "component": "", "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Design:** Frame-based rendering with priority-based layer compositing at 10 FPS.\n\n**Rendering Pipeline** (executed at 100ms intervals):\n\n1. **Clear**: ``led_clear_all()`` - reset all LEDs to off state\n2. **Ideal Zone Background Layer** (2% red brightness):\n   - Always render ideal zone LEDs (ideal_start through ideal_end) at 2% brightness\n   - Provides constant visual reference of target parking zone\n3. **Animation Layer** (2-100% brightness):\n   - Render white or red animation LED at current animation position\n4. **Position Layer** (50-100% brightness):\n   - Render orange or green LED at measured position (overwrites animation if same position)\n5. **Ideal Zone Full Brightness Layer**:\n   - If in ideal zone: Overwrite ALL ideal zone LEDs with red at 100% brightness\n6. **Emergency Layer** (highest priority):\n   - If below minimum: Overwrite LEDs 0, 10, 20, 30... with blinking red\n7. **Commit**: ``led_show()`` - transmit complete buffer atomically\n\n**Timing:**\n\n- FreeRTOS timer callback at 100ms intervals for animation updates\n- Distance measurement updates position immediately (no waiting for timer)\n- Non-blocking: Timer callback completes in <1ms\n\n**Validation:** All layers composite correctly, priority enforced, single led_show() per\nframe, no visual tearing, animation smooth at 10 FPS.", "created_at": "", "docname": "12_design/spec_display", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "header_file": "", "id": "SPEC_DSP_ALGO_2", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 109, "links": ["REQ_DSP_13", "REQ_DSP_10"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "parameters": "", "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "returns": "", "section_name": "Core Algorithms", "sections": ["Core Algorithms", "Display System Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["display", "rendering", "architecture"], "template": null, "title": "Multi-Layer Rendering Pipeline", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 1}}}