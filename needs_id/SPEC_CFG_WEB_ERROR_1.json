{"created": "2025-11-12T11:00:58.930154", "current_version": "", "project": "ESP32 Distance Sensor", "versions": {"": {"created": "2025-11-12T11:00:58.930134", "creator": {"program": "sphinx_needs", "version": "6.1.0"}, "needs": {"SPEC_CFG_WEB_ERROR_1": {"acceptance_criteria": "", "api_signature": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "component": "", "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** Comprehensive error handling for all API operations with user-friendly feedback.\n\n**Error Categories:**\n\n1. **Network Errors**: Fetch timeout, connection refused, DNS failure\n2. **HTTP Errors**: 4xx client errors, 5xx server errors\n3. **Validation Errors**: Invalid form data, schema mismatch\n4. **Parse Errors**: Malformed JSON responses\n\n**Error Handling Implementation:**\n\n.. code-block:: javascript\n\n   async function apiCall(url, options = {}) {\n     try {\n       const response = await fetch(url, {\n         ...options,\n         timeout: 10000 // 10 second timeout\n       });\n\n       if (!response.ok) {\n         // HTTP error\n         let errorMsg = `HTTP ${response.status}`;\n\n         // Try to parse error response\n         try {\n           const errorData = await response.json();\n           if (errorData.error) {\n             errorMsg = errorData.error;\n           }\n         } catch (e) {\n           // Response not JSON, use default message\n         }\n\n         throw new Error(errorMsg);\n       }\n\n       // Parse successful response\n       const data = await response.json();\n       return data;\n\n     } catch (error) {\n       // Network error or other exception\n       if (error.name === 'AbortError') {\n         throw new Error('Request timeout - device may be offline');\n       }\n       throw error;\n     }\n   }\n\n**User Feedback Display:**\n\n.. code-block:: javascript\n\n   function showMessage(message, type = 'info') {\n     const messageEl = document.getElementById('message-banner');\n\n     messageEl.textContent = message;\n     messageEl.className = `message ${type}`; // 'success', 'error', 'warning', 'info'\n     messageEl.style.display = 'block';\n\n     // Auto-hide success messages after 5 seconds\n     if (type === 'success') {\n       setTimeout(() => {\n         messageEl.style.display = 'none';\n       }, 5000);\n     }\n   }\n\n**Retry Logic for Critical Operations:**\n\n.. code-block:: javascript\n\n   async function loadSchemaWithRetry(maxRetries = 3) {\n     let lastError;\n\n     for (let i = 0; i < maxRetries; i++) {\n       try {\n         const schema = await apiCall('/api/config/schema');\n         return schema;\n       } catch (error) {\n         lastError = error;\n         if (i < maxRetries - 1) {\n           // Wait before retry: 1s, 2s, 4s\n           await sleep(1000 * Math.pow(2, i));\n         }\n       }\n     }\n\n     throw new Error(`Failed to load schema after ${maxRetries} attempts: ${lastError.message}`);\n   }", "created_at": "", "docname": "12_design/spec_config_webpage", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "header_file": "", "id": "SPEC_CFG_WEB_ERROR_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 583, "links": ["SPEC_CFG_WEB_ARCH_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "parameters": "", "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "returns": "", "section_name": "Error Handling", "sections": ["Error Handling", "Configuration Webpage Design Specification"], "service": "", "signature": null, "specific": "", "status": "open", "style": null, "tags": ["error-handling", "feedback"], "template": null, "title": "Error Handling and User Feedback", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 1}}}