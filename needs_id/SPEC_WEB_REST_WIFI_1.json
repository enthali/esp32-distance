{"created": "2025-11-12T08:52:39.103103", "current_version": "", "project": "ESP32 Distance Sensor", "versions": {"": {"created": "2025-11-12T08:52:39.103085", "creator": {"program": "sphinx_needs", "version": "6.1.0"}, "needs": {"SPEC_WEB_REST_WIFI_1": {"acceptance_criteria": "", "api_signature": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "component": "", "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Endpoint: GET /scan**\n\n**Purpose:** Scan for available WiFi networks\n\n**Response:**\n\n.. code-block:: json\n\n   {\n     \"networks\": [\n       {\n         \"ssid\": \"NetworkName\",\n         \"rssi\": -45,\n         \"authmode\": 3\n       }\n     ]\n   }\n\n**Implementation Notes:**\n\n- Automatically switches to APSTA mode if in AP mode (scanning requires STA)\n- Returns sorted list by signal strength (RSSI)\n- ``authmode``: 0=Open, 2=WPA-PSK, 3=WPA2-PSK, 4=WPA/WPA2-PSK\n\n---\n\n**Endpoint: POST /connect**\n\n**Purpose:** Connect to WiFi network with provided credentials\n\n**Request:**\n\n.. code-block:: json\n\n   {\n     \"ssid\": \"NetworkName\",\n     \"password\": \"secretpassword\"\n   }\n\n**Response (200 OK):**\n\n.. code-block:: json\n\n   {\n     \"success\": true\n   }\n\n**Integration:** Calls ``wifi_manager_set_credentials()`` to save credentials to NVS and initiate connection.\n\n---\n\n**Endpoint: GET /status**\n\n**Purpose:** Get current WiFi connection status\n\n**Response:**\n\n.. code-block:: json\n\n   {\n     \"mode\": 1,\n     \"ssid\": \"ConnectedNetwork\",\n     \"rssi\": -52,\n     \"has_credentials\": true,\n     \"ip\": \"192.168.1.100\"\n   }\n\n**Integration:** Calls ``wifi_manager_get_status()`` and ``wifi_manager_get_ip_address()``.\n\n---\n\n**Endpoint: POST /reset**\n\n**Purpose:** Clear WiFi credentials and restart device in AP mode\n\n**Response:**\n\n.. code-block:: json\n\n   {\n     \"success\": true,\n     \"message\": \"Device will restart in AP mode in 3 seconds\"\n   }\n\n**Implementation:** Calls ``wifi_manager_clear_credentials()`` and schedules device restart.", "created_at": "", "docname": "12_design/spec_web_server", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "header_file": "", "id": "SPEC_WEB_REST_WIFI_1", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 495, "links": ["REQ_WEB_3"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "parameters": "", "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "", "query": "", "rationale": "", "returns": "", "section_name": "Configuration API Design", "sections": ["Configuration API Design", "Web Server Design Specification"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["web", "api", "wifi"], "template": null, "title": "WiFi Management REST API Endpoints", "type": "spec", "type_name": "Design Specification", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 1}}}