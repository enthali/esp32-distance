{"created": "2025-11-12T08:43:41.258608", "current_version": "", "project": "ESP32 Distance Sensor", "versions": {"": {"created": "2025-11-12T08:43:41.258577", "creator": {"program": "sphinx_needs", "version": "6.1.0"}, "needs": {"REQ_DSP_4": {"acceptance_criteria": "", "api_signature": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "component": "", "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:** The display system SHALL use a dual-layer architecture combining position\nindication and directional animation to guide optimal parking. When distance is outside the\nideal zone, the system SHALL display a green LED at the measured position (position layer)\nand a directional animation (animation layer) at reduced brightness guiding toward the ideal zone.\n\n**Rationale:** Dual-layer display provides both current position feedback and directional\nguidance. The ideal zone is calculated as a centered range (IDEAL_CENTER_PERCENT \u00b1\nIDEAL_SIZE_PERCENT/2) to provide a clear target area. Green position indicator shows current\nlocation, while low-brightness directional animation (2%) guides without overwhelming the\nposition signal.\n\n**Zone Calculation** (configuration-independent):\n\n- ``ideal_size = (led_count * 10) / 100`` (10% of strip)\n- ``ideal_center = (led_count * 30) / 100`` (30% position)\n- ``ideal_start = ideal_center - (ideal_size / 2)``\n- ``ideal_end = ideal_start + ideal_size - 1``\n\n**Acceptance Criteria:**\n\n- AC-1: Minimum configured distance maps exactly to first LED (position 0)\n- AC-2: Maximum configured distance maps exactly to last LED (position led_count-1)\n- AC-3: LED position calculated using linear interpolation between positions 0 and led_count-1\n- AC-4: Zone 1 \"too close\" (position < ideal_start): Orange LED at position (50% brightness) + red animation (100% brightness)\n- AC-5: Zone 2 \"ideal\" (ideal_start \u2264 position \u2264 ideal_end): All ideal zone LEDs red\n- AC-6: Zone 3 \"too far\" (position > ideal_end): Green LED at position + white animation\n- AC-7: Zone boundaries calculated using integer arithmetic for embedded efficiency\n- AC-8: Ideal zone size = 10% of LED count, centered at 30% position", "created_at": "", "docname": "11_requirements/req_display", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "header_file": "", "id": "REQ_DSP_4", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 106, "links": ["REQ_DSP_3", "REQ_DSP_2"], "links_back": ["REQ_DSP_6", "REQ_DSP_7", "REQ_DSP_8", "REQ_DSP_9", "REQ_DSP_10", "REQ_DSP_14", "SPEC_DSP_ALGO_1", "API_COMP_DISPLAY_LOGIC", "API_FUNC_DISPLAY_LOGIC_START"], "max_amount": "", "max_content_lines": "", "modifications": 0, "parameters": "", "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "mandatory", "query": "", "rationale": "", "returns": "", "section_name": "User Experience Requirements", "sections": ["User Experience Requirements", "Display System Requirements"], "service": "", "signature": null, "specific": "", "status": "approved", "style": null, "tags": ["display", "ux", "animation", "zones"], "template": null, "title": "Dual-Layer Display with Position and Animation", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 1}}}