{"created": "2025-11-12T12:22:49.513665", "current_version": "", "project": "ESP32 Distance Sensor", "versions": {"": {"created": "2025-11-12T12:22:49.513646", "creator": {"program": "sphinx_needs", "version": "6.1.0"}, "needs": {"REQ_CFG_JSON_15": {"acceptance_criteria": "", "api_signature": "", "arch": {}, "avatar": "", "closed_at": "", "completion": null, "component": "", "constraints": [], "constraints_error": null, "constraints_passed": true, "constraints_results": {}, "content": "**Description:**\nThe configuration system MAY support schema versioning and automatic migration of configuration data across firmware updates.\n\n**Rationale:**\nAs firmware evolves, configuration structure may change (new fields, renamed keys, changed types). Schema versioning enables detection and migration of old configurations. However, embedded devices are typically \"programmed out\" thoroughly before production deployment, minimizing schema changes after deployment.\n\n**Acceptance Criteria (if implemented):**\n\n- AC-1: config_schema.json includes \"schema_version\" field\n- AC-2: config_init() detects NVS schema version mismatch\n- AC-3: Migration functions upgrade old config to new schema\n- AC-4: Migration preserves user settings where possible\n- AC-5: Failed migration triggers factory reset with user warning\n\n**Note:** This requirement is marked \"open\" as schema changes are rare in production embedded systems. Hardware constraints typically stabilize configuration structure early in development. For most deployments, factory reset on major firmware updates is acceptable alternative to complex migration logic.", "created_at": "", "docname": "11_requirements/req_config_manager_json", "doctype": ".rst", "duration": null, "external_css": "external_link", "external_url": null, "has_dead_links": false, "has_forbidden_dead_links": false, "header_file": "", "id": "REQ_CFG_JSON_15", "id_prefix": "", "is_external": false, "is_import": false, "is_modified": false, "jinja_content": false, "layout": null, "lineno": 338, "links": ["REQ_CFG_JSON_1"], "links_back": [], "max_amount": "", "max_content_lines": "", "modifications": 0, "parameters": "", "params": "", "parent_need": null, "parent_needs": [], "parent_needs_back": [], "parts": {}, "post_content": null, "post_template": null, "pre_content": null, "pre_template": null, "prefix": "", "priority": "optional", "query": "", "rationale": "", "returns": "", "section_name": "Future Enhancements", "sections": ["Future Enhancements", "JSON-Based Configuration Manager Requirements"], "service": "", "signature": null, "specific": "", "status": "open", "style": null, "tags": ["config", "versioning", "migration", "future"], "template": null, "title": "Configuration Schema Versioning and Migration", "type": "req", "type_name": "Requirement", "updated_at": "", "url": "", "url_postfix": "", "user": ""}}, "needs_amount": 1}}}