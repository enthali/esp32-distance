repos:
  - repo: local
    hooks:
      - id: markdownlint
        name: Markdown lint
        # markdownlint-cli is available globally via npm in the devcontainer
        entry: markdownlint --fix
        language: system
        types: [markdown]
        # Only run on markdown files in docs/ and root-level markdown files
        files: ^(docs/.*\.md|.*\.md)$
        stages: [pre-commit]
      - id: sphinx-build
        name: Sphinx build (strict)
        # sphinx-build is available in /opt/venv/bin in the devcontainer
        # -W treats warnings as errors (strict mode)
        # -b html specifies HTML output
        entry: bash -c 'cd docs && sphinx-build -W -b html . _build/html'
        language: system
        pass_filenames: false
        # Only run if docs/ or conf.py changed (skip for code-only commits)
        files: ^(docs/.*)$
        require_serial: true
        verbose: true
        stages: [pre-commit]
